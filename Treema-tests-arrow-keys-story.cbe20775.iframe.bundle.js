(self.webpackChunkreact_treema=self.webpackChunkreact_treema||[]).push([[621],{"./src/Treema/tests/arrow-keys.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloseCollections:()=>CloseCollections,DownStart:()=>DownStart,EitherEnd:()=>EitherEnd,RightOpens:()=>RightOpens,SkipClosed:()=>SkipClosed,TraverseCollections:()=>TraverseCollections,default:()=>arrow_keys_story});var TreemaRoot=__webpack_require__("./src/Treema/TreemaRoot.tsx"),context=__webpack_require__("./src/Treema/tests/context.ts");const downStartTest={name:"down arrow starts at the document root, if nothing is selected",test:async ctx=>{await ctx.fireFocus(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("")}},skipClosed={name:"up and down arrows skip closed collections",test:async ctx=>{await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual(""),await ctx.fireArrowDown(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/address"),await ctx.fireArrowUp(),ctx.expect(ctx.getLastPath()).toEqual("/numbers")}},rightOpens={name:"right arrow opens a collection",test:async ctx=>{await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual(""),await ctx.fireArrowDown(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowRight(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/0")}},traverseOpenCollections={name:"up and down traverses open collections",test:async ctx=>{await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual(""),await ctx.fireArrowDown(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowRight(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/0"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/1"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/1/0"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/address"),await ctx.fireArrowUp(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/1/0"),await ctx.fireArrowUp(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/1"),await ctx.fireArrowUp(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/0")}},closeCollections={name:"left arrow closes a collection",test:async ctx=>{await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual(""),await ctx.fireArrowDown(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowRight(),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/numbers/0"),await ctx.fireArrowLeft(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowLeft(),ctx.expect(ctx.getLastPath()).toEqual("/numbers"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/address")}},eitherEnd={name:"up arrow wraps at the top of the collection, down arrow stays at the bottom",test:async ctx=>{await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual(""),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/name"),await ctx.fireArrowUp(),await ctx.fireArrowUp(),ctx.expect(ctx.getLastPath()).toEqual("/address"),await ctx.fireArrowDown(),ctx.expect(ctx.getLastPath()).toEqual("/address")}},args={schemaLib:__webpack_require__("./src/Treema/utils.ts").noopLib,onEvent:context.Vl,initOpen:1,data:{name:"Bob",numbers:["401-401-1337",["123-456-7890"]],address:"Mars"},schema:{type:"object",displayProperty:"name",properties:{name:{type:"string",title:"NAME"},numbers:{type:"array",items:{type:["string","array"]}},address:{type:"string"}}}};var utils_storybook=__webpack_require__("./src/Treema/tests/utils-storybook.ts");const arrow_keys_story={title:"InteractiveTests/ArrowKeys",component:TreemaRoot.W,parameters:{docs:{description:{component:"This storybook demonstrates and tests arrow key behaviors."}}}},DownStart=(0,utils_storybook.x)(downStartTest,args),SkipClosed=(0,utils_storybook.x)(skipClosed,args),RightOpens=(0,utils_storybook.x)(rightOpens,args),TraverseCollections=(0,utils_storybook.x)(traverseOpenCollections,args),CloseCollections=(0,utils_storybook.x)(closeCollections,args),EitherEnd=(0,utils_storybook.x)(eitherEnd,args);DownStart.parameters={...DownStart.parameters,docs:{...DownStart.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(downStartTest, args)",...DownStart.parameters?.docs?.source}}},SkipClosed.parameters={...SkipClosed.parameters,docs:{...SkipClosed.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(skipClosed, args)",...SkipClosed.parameters?.docs?.source}}},RightOpens.parameters={...RightOpens.parameters,docs:{...RightOpens.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(rightOpens, args)",...RightOpens.parameters?.docs?.source}}},TraverseCollections.parameters={...TraverseCollections.parameters,docs:{...TraverseCollections.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(traverseOpenCollections, args)",...TraverseCollections.parameters?.docs?.source}}},CloseCollections.parameters={...CloseCollections.parameters,docs:{...CloseCollections.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(closeCollections, args)",...CloseCollections.parameters?.docs?.source}}},EitherEnd.parameters={...EitherEnd.parameters,docs:{...EitherEnd.parameters?.docs,source:{originalSource:"wrapGenericTestInStory(eitherEnd, args)",...EitherEnd.parameters?.docs?.source}}}},"./src/Treema/tests/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Vl:()=>onEvent,_v:()=>sleep,g6:()=>TreemaStorybookTestContext});const user=__webpack_require__("./node_modules/@testing-library/user-event/dist/esm/index.js").Z.setup();function sleep(ms){return new Promise((resolve=>setTimeout(resolve,ms)))}let lastPath,lastData;const onEvent=event=>{"change_select_event"===event.type&&(lastPath=event.path),"change_data_event"===event.type&&(lastData=event.data)};class TreemaStorybookTestContext{constructor(root,jest,testingLibrary,speed=200){this.root=void 0,this.treema=void 0,this.testingLibrary=void 0,this.expect=void 0,this.speed=void 0,this.root=root,"treema-root"===this.root.getAttribute("data-testid")?this.treema=this.root:this.treema=testingLibrary.within(this.root).getByTestId("treema-root"),this.testingLibrary=testingLibrary,this.expect=jest.expect,this.speed=speed}query(){return this.testingLibrary.within(this.root)}async fireFocus(){await this.testingLibrary.fireEvent.focus(this.treema),await sleep(this.speed)}async fireArrowDown(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"ArrowDown",code:"ArrowDown"}),await sleep(this.speed)}async fireArrowUp(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"ArrowUp",code:"ArrowUp"}),await sleep(this.speed)}async fireArrowLeft(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"ArrowLeft",code:"ArrowLeft"}),await sleep(this.speed)}async fireArrowRight(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"ArrowRight",code:"ArrowRight"}),await sleep(this.speed)}async fireEnter(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"Enter",code:"Enter"}),await sleep(this.speed)}async fireTab(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"Tab",code:"Tab"}),await sleep(this.speed)}async fireBackspace(){await this.testingLibrary.fireEvent.keyDown(this.treema,{key:"Backspace",code:"Backspace"}),await sleep(this.speed)}async type(input){await user.keyboard(input),await sleep(this.speed)}async clear(){await user.clear(this.testingLibrary.within(this.treema).getByRole("textbox"))}async selectOptions(select,values){await user.selectOptions(select,values),await sleep(this.speed)}getLastPath(){return lastPath}getData(){return lastData}}},"./src/Treema/tests/utils-storybook.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>wrapGenericTestInStory});var _context__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Treema/tests/context.ts"),_storybook_jest__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/jest/dist/esm/index.js"),_storybook_testing_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/testing-library/dist/esm/index.js");const wrapGenericTestInStory=(test,args)=>({name:test.name,args,play:async({canvasElement})=>{const context=new _context__WEBPACK_IMPORTED_MODULE_0__.g6(canvasElement,_storybook_jest__WEBPACK_IMPORTED_MODULE_1__,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_2__);await(0,_context__WEBPACK_IMPORTED_MODULE_0__._v)(100),await test.test(context)}})},"?4f7e":()=>{}}]);